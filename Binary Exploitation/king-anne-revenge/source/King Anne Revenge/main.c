#include <stdio.h>
#include <string.h>

void getflag(char *password)
{
    if (strcmp(password, "bartholomew123") == 0)
    {
        FILE *file = fopen("flag.txt", "r");
        if (file == NULL)
        {
            printf("Arrr! Me treasure map be lost in the sea!\n");
            return;
        }
        char flag[100];
        fgets(flag, sizeof(flag), file);
        printf("Here be yer BIG treasure, matey:\n%s\n\n", flag);
        printf("may ye be the richest in ALL of Seven Seas!\n");
        fclose(file);
    }
    else
    {
        printf("\nYe son of a biscuit eater! get out of me treasure before I make ye walk the plank! Begone this instant!\n");
    }
}

int main()
{
    setvbuf(stdout, NULL, _IONBF, 0);
    setvbuf(stdin, NULL, _IONBF, 0);

    char piratename[15];
    char password[15];

    printf("ROYAL FORTUNE: Frigate Treasure\n");
    printf("ye want MORE riches? 'tis not gonna be easy, aye,\n");
    printf("well then, identify yerself, ye scallywag: ");
    gets(piratename);
    printf(piratename);
    printf("\nsay yer magic words: ");
    gets(password);
    printf(password);

    if ((strcmp(piratename, "bartholomew") == 0) && (strcmp(password, "bartholomew123") == 0))
    {
        printf("\nAhoy, Cap'n Bartholomew Roberts! yer crews be ready for yer orders! Let's plunder Blackbeard, aye!\n");
        getflag(piratename);
    }
    else if ((strcmp(piratename, "pirate") == 0) && (strcmp(password, "letmein") == 0))
    {
        printf("\nAye, regular lad! Full sail on the Frigate! Sing me chanties!\n");
    }
    else
    {
        printf("\nnYe Landlubber! Get off me ship and be lost in the sea with them sirens! Walk the plank, NOW!\n");
    }

    return 0;
}