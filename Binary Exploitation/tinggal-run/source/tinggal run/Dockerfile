FROM ubuntu:22.04

RUN apt-get update && apt-get install -y socat build-essential

RUN useradd -m ctf

WORKDIR /app

RUN chown root:root /app && chmod 755 /app
COPY chall /app/chall

COPY entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

RUN chmod 111 /app/chall

EXPOSE 1337

CMD ["/entrypoint.sh"]